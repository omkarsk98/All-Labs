#include <graphics.h>
#include <math.h>
#include <stdio.h>
void rotate(int, int, int, int);
int i = 0;
int x = 0;
float a[][2] = {{250, 300}, {150, 340}, {200, 340}, {100, 400}, {80, 380}, {115, 380}, {132, 380}, {250, 380}, {250, 340}, {150, 300}, {100, 270}, {200, 300}, {80, 300}, {80, 340}, {40, 340}, {40, 194}, {250, 338}, {320, 333}, {261, 333}, {261, 310}, {100, 310}, {100, 330}, {120, 310}, {120, 330}, {130, 310}, {130, 330}, {150, 310}, {150, 330}, {160, 310}, {160, 330}, {180, 310}, {180, 330}, {190, 310}, {190, 330}, {210, 310}, {210, 330}, {220, 310}, {220, 330}, {240, 310}, {240, 330}};

void main()
{
  int j;
  int gd = DETECT, gm;
  initgraph(&gd, &gm, "C://TURBOC3//BGI");
  for (i = 0; i < 70; i++)
  {
    line(0, 400, 640, 400);
    // houses
    rectangle(640 - (0.5 * i), 380, 680 - (0.5 * i), 350);
    rectangle(680 - (0.5 * i), 380, 740 - (0.5 * i), 350);
    line(660 - (0.5 * i), 330, 680 - (0.5 * i), 350);
    line(660 - (0.5 * i), 330, 640 - (0.5 * i), 350);
    line(720 - (0.5 * i), 330, 660 - (0.5 * i), 330);
    line(720 - (0.5 * i), 330, 740 - (0.5 * i), 350);

    rectangle(620 - (0.5 * i), 380, 560 - (0.5 * i), 350);
    rectangle(520 + 40 - (0.5 * i), 380, 480 + 40 - (0.5 * i), 350);
    line(500 - (0.5 * i) + 40, 330, 520 - (0.5 * i) + 40, 350);
    line(500 - (0.5 * i) + 40, 330, 480 - (0.5 * i) + 40, 350);
    line(500 - (0.5 * i) + 40, 330, 560 - (0.5 * i) + 40, 330);
    line(560 - (0.5 * i) + 40, 330, 580 - (0.5 * i) + 40, 350);
    
    //Aircraft structure
    line(a[12][0] + i, a[12][1], a[0][0] + i, a[0][1]);
    int t1[] = {a[1][0] + i, a[1][1], a[2][0] + i, a[2][1], a[3][0] + i, a[3][1], a[1][0] + i, a[1][1]};
    drawpoly(4, t1);
    line(a[4][0] + i, a[4][1], a[5][0] + i, a[5][1]);
    line(a[6][0] + i, a[6][1], a[7][0] + i, a[7][1]);
    ellipse(a[8][0] + i, a[8][1], 270, 90, 80, 40);
    int t2[] = {a[10][0] + i, a[10][1], a[9][0] + i, a[9][1], a[11][0] + i, a[11][1], a[10][0] + i, a[10][1]};
    drawpoly(4, t2);
    int t3[] = {a[12][0] + i, a[12][1], a[15][0] + i, a[15][1], a[14][0] + i, a[14][1], a[14][0] + i, a[14][1]};
    drawpoly(4, t3);
    arc(a[13][0] + i, a[13][1], 90, 180, 40);
    ellipse(a[16][0] + i, a[16][1], 278, 350, 70, 30);
    line(a[18][0] + i, a[18][1], a[17][0] + i, a[17][1]);
    line(a[18][0] + i, a[18][1], a[19][0] + i, a[19][1]);
    
    //windows
    rectangle(a[20][0] + i, a[20][1], a[23][0] + i, a[23][1]);
    rectangle(a[24][0] + i, a[24][1], a[27][0] + i, a[27][1]);
    rectangle(a[28][0] + i, a[28][1], a[31][0] + i, a[31][1]);
    rectangle(a[32][0] + i, a[32][1], a[35][0] + i, a[35][1]);
    rectangle(a[36][0] + i, a[36][1], a[39][0] + i, a[39][1]);

    delay(30);
    cleardevice();
  }
  for (j = 0; j < 100; j++)
  {
    // houses
    rectangle(600 - (0.5*j)- 35, 380, 640 - (0.5*j) - 35, 350);
    rectangle(640 - (0.5*j) - 35, 380, 700 - (0.5*j) - 35 , 350);
    line(620 - (0.5*j) - 35, 330, 640 - (0.5*j) - 35 , 350);
    line(620 - (0.5*j)  - 35, 330, 600 - (0.5*j) - 35, 350);
    line(680 - (0.5*j) - 35, 330, 620 - (0.5*j) - 35, 330);
    line(680 - (0.5*j) - 35 , 330, 700 - (0.5*j) - 35 , 350);

    rectangle(580 - (0.5*j) - 35 , 380, 520 - (0.5*j) - 35 , 350);
    rectangle(520 - (0.5*j) - 35, 380, 480 - (0.5*j) - 35 , 350);
    line(500 - (0.5*j) - 35, 330, 520 - (0.5*j) - 35, 350);
    line(500 - (0.5*j) - 35, 330, 480 - (0.5*j) - 35, 350);
    line(500 - (0.5*j) - 35, 330, 560 - (0.5*j) - 35, 330);
    line(560 - (0.5*j) - 35, 330, 580 - (0.5*j) - 35, 350);

    line(0, 400, 640, 400);

    line(a[12][0] + i + j, a[12][1] - j, a[0][0] + i + j, a[0][1] - j);
    line(a[1][0] + i + j, a[1][1] - j, a[2][0] + i + j, a[2][1] - j);
    line(a[1][0] + i + j, a[1][1] - j, a[3][0] + i + j, a[3][1] - j);
    line(a[2][0] + i + j, a[2][1] - j, a[3][0] + i + j, a[3][1] - j);
    line(a[4][0] + i + j, a[4][1] - j, a[5][0] + i + j, a[5][1] - j);
    line(a[6][0] + i + j, a[6][1] - j, a[7][0] + i + j, a[7][1] - j);
    ellipse(a[8][0] + i + j, a[8][1] - j, 270, 90, 80, 40);
    line(a[10][0] + i + j, a[10][1] - j, a[9][0] + i + j, a[9][1] - j);
    line(a[10][0] + i + j, a[10][1] - j, a[11][0] + i + j, a[11][1] - j);
    line(a[12][0] + i + j, a[12][1] - j, a[15][0] + i + j, a[15][1] - j);
    arc(a[13][0] + i + j, a[13][1] - j, 90, 180, 40);
    line(a[14][0] + i + j, a[14][1] - j, a[15][0] + i + j, a[15][1] - j);
    ellipse(a[16][0] + i + j, a[16][1] - j, 278, 350, 70, 30);
    line(a[18][0] + i + j, a[18][1] - j, a[17][0] + i + j, a[17][1] - j);
    line(a[18][0] + i + j, a[18][1] - j, a[19][0] + i + j, a[19][1] - j);
    
    //windows
    rectangle(a[20][0] + i + j, a[20][1] - j, a[23][0] + i + j, a[23][1] - j);
    rectangle(a[24][0] + i + j, a[24][1] - j, a[27][0] + i + j, a[27][1] - j);
    rectangle(a[28][0] + i + j, a[28][1] - j, a[31][0] + i + j, a[31][1] - j);
    rectangle(a[32][0] + i + j, a[32][1] - j, a[35][0] + i + j, a[35][1] - j);
    rectangle(a[36][0] + i + j, a[36][1] - j, a[39][0] + i + j, a[39][1] - j);
    delay(30);
    cleardevice();
  }

  getch();
  closegraph();
}